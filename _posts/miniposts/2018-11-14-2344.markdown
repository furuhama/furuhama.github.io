---
layout: post
title: view テンプレート
date: 2018-11-14 23:44:52
tag: [minipost]
---

僕はもっぱら仕事で rails を書いているが、一向に rails の view テンプレートが好きになれない。 html を生成したいのに ruby の世界から触ろうとしているから不思議な構造になっているというのが一番大きな理由だと思っている。理解しきれていないヘルパーもまだあるだろうし。しかしこれは ruby 以外の様々な言語においても発生していることだろうし、 DSL によって html を生成するか、文字列として扱って頑張るかのどちらかしかない気がしているので、どうしようもないことかなあ。 Jekyll のマークダウンの書き方とかも気持ち悪いし全然好きじゃないんだよね。逆に生の html は冗長だけど納得はできる作りなのであんまり苦じゃない気もする。つらい。

で、話は view テンプレートに留まらず。一対多の関連のモデル同士があった時に、親リソースから子リソースたちを作りやすくするように view を拡張してくれる cocoon という gem があるが、これも同じくというか、これに関しては view テンプレート自体よりも格段に好きになれない。

こっちの理由は自分の中では明確で、(おそらく)汎用的な API を目指したが故に、やりたいことに対して意図の見えづらい使い方を押し付けられているという点だ。

そもそも親リソースに対して子リソースたちが関連しているデータ構造では、情報の更新の際に子リソースたちの差分管理という概念が必要になる。どれが増えて、どれがそのままで、どれが減ったのか、というのを管理するのは少し難しいと思う。なおかつ、js をないものとした場合、入力に対して要素を動的に変化させることも難しい。

この辺りを解決してくれているという点では評価すべきものだと思っているが、いかんせん API がよくないのではないかという気がしている。とはいえぐちぐち言ってても仕方がないので、自分が作るんだったらどうするか考えて、それでまた評価を決めようと思う。もしかすると数日後には大好きになっているかもしれない、とはいえそういうことはよくあることだし気にしないでいいかな。理解できてないものに嫌悪感を覚えるのは恥ずべきことだけど同時に自然なことのような気もするし。うん、とりあえず現時点では全然好きじゃないってことで。
