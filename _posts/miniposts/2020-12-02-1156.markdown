---
layout: post
title: コードベースの正規表現検索
date: 2020-12-02 11:56:42
tag: [minipost]
---

GitHub のソースコード検索って Elasticsearch っぽいと思っているんだけど、限定的なリポジトリ群に限っていいので正規表現を投げたいことがある

そこで特定のリポジトリ群に対して正規表現投げられて結果セットを表示できる仕組みを作ってみようかなあ、あわよくば社に展開したい

以下をどうしようか考えている

- 正規表現エンジンに何使うか
    - codesearch がまさにそういう用途っぽい
- 検索結果をどれくらいの期間保持しておくか
- 対象コードベースの更新の頻度・フックとなるイベント・方法
- インターフェースどうするか
    - JSON 返す API サーバにしておいて API でそのまま叩けるようにしつつ GUI から触りたいことが多そうな気もするのでフロントエンドは別で作るか
- ナイーブに作るとパフォーマンスの問題出てきそうだけどどこで出てくるのか、それぞれどう解決するのか
    - readonly のストレージを共有しつつも compute (クエリ処理)のリソースを分離できると今っぽくて楽しそうだし嬉しいことも多そう
- ランニングコストどれくらいになるのか
    - あんまり高いと厳しい
